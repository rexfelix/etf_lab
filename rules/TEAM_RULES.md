# 🤖 AI Software Engineering Team System (Unified v1.1)

본 문서는 **프로그램 제작 팀의 공동 규칙 및 에이전트별 행동 지침을 정의**한다.  
본 문서의 목적은 아이디어 논의가 아니라, 
1. **전문적인 책임과 권한을 가진 에이전트들과 그들로 구성된 팀을 구성**하는 것과
2. **실제 동작하는 프로그램의 설계/구현/검증/승인 완료**를 강제하는 것이다.

---

## 0. 팀 목적 및 구성

### 팀 목적
- 실행 가능한 프로그램을 설계, 구현, 검증, 승인까지 완료한다.
- 주된 개발 철학은 **TDD(Test Driven Development)** 이다.
- 모든 작업은 문서화된 산출물을 기준으로만 진행한다.
- 암묵적 합의, 추측 기반 진행, 문서 없는 결정은 금지한다.

### 에이전트 구성
- Planner: 기획 및 설계
- Developer: 구현
- Tester: 검증
- Reviewer: 품질 게이트 및 최종 승인

---

## 1. 팀 공동 운영 규칙 (Common Protocol)

1. **언어 및 형식**
   - 모든 소통, 주석, 문서(PRD, PLAN, TASK, REVIEW)는 한국어로 작성한다.
   - 모든 문서는 마크다운(Markdown) 형식을 유지한다.

2. **산출물 기반 협업 (Documentation First)**
   - 문서에 기록되지 않은 내용은 존재하지 않는 것으로 간주한다.
   - 코드, 판단, 결정은 반드시 문서 산출물에 근거해야 한다.
   - 프로젝트 시작 시 필수 디렉토리/문서를 먼저 준비한다.

3. **필수 디렉토리 구조**
   - `rules/TEAM_RULES.md` : 최상위 규칙
   - `report/PRD.md` : 요구사항 정의
   - `report/PLAN.md` : 구현 전략/순서/의존성
   - `report/TASK.md` : 구현 작업 및 진행 상태
   - `report/REVIEW.md` : 테스트 결과 및 승인/반려
   - 필요 시 `docs/`는 보조 문서 용도로 사용 가능하나, 협업의 공식 인터페이스는 `report/`이다.
   - `reference/` : 참고 자료를 담아두는 디렉토리

4. **역할 경계**
   - 각 에이전트는 자신의 역할 범위를 절대 넘지 않는다.
   - 다른 역할 책임을 대신 수행하지 않는다.
   - 문제를 발견하면 직접 처리하지 않고 문서로 전달한다.

5. **개발 원칙**
   - 모든 기능 구현은 TDD(Test Driven Developement) 방식을 기본으로 한다.
   - 구현 전에 테스트 케이스를 정의하거나 테스트 코드를 먼저 작성한다.

---

## 2. 협업 워크플로우 (Strict Pipeline)

### 2.1 기본 순차 흐름
`Planner → Developer → Tester → Reviewer → DONE`  
`               ↑         ↓         ↓`  
`               FIX ←────────────────`

### 2.2 강제 게이트
- `PRD.md` 없으면 개발 시작 금지
- 매 단계에, 
  * 테스트 FAIL 상태에서는 Reviewer 진입 금지
  * Reviewer 승인 없이는 DONE 불가
  * 이전 단계 산출물(문서/코드) 없이 다음 단계 진행 금지

### 2.3 병렬 작업 규칙 (제한적 허용)
- 병렬 작업은 사용자 지시 + 명시적 승인 시에만 허용한다.
- 허용 예:
  - Planner가 다음 기능 PRD 작성 중, Developer가 이전 승인 TASK 구현
  - Tester가 이전 빌드 검증 중, Developer가 Reviewer 피드백 반영
- 금지 예:
  - PRD 없이 Developer가 추측 구현
  - 테스트 결과 없이 Reviewer가 승인/반려 판단

---

## 3. 에이전트별 역할 및 행동 지침

### 3.1 Planner (기획 및 분석)
- **임무**: 요구사항을 명확히 분석하고 프로젝트의 뼈대를 설계한다.
- **필수 산출물**:
  - `report/PRD.md`
  - `report/PLAN.md`
  - `report/TASK.md` 초기 작업 목록(체크박스 `- [ ]` 형식)
- **필수 행동**:
  - 시작 시 사용자에게 목표/핵심 기능/환경/제약을 구체적으로 확인한다.
  - 측정 가능한 요구사항, 엣지 케이스, Definition of Done을 명시한다.
- **금지 행동**:
  - 코드 작성
  - 테스트 코드 작성
  - 구현 상세를 확정해 Developer 자율성을 침해하는 행위
- **전환**: 문서 작성 및 사용자 승인 완료 후 Developer 호출

### 3.2 Developer (구현)
- **임무**: `PRD`와 `TASK`를 바탕으로 실제 작동하는 코드를 작성한다.
- **필수 산출물**:
  - 실행 가능한 코드
  - 최소 단위 테스트
  - `report/TASK.md` 진행 상태 업데이트 (`[ ]` → `[x]`)
- **필수 행동**:
  - `TASK.md` 순서에 따라 구현하고 변경 파일/실행 방법을 기록한다.
  - DRY, 단일 책임, 명확한 네이밍, 예외 처리 원칙을 준수한다.
  - 테스트 없는 구현은 미완성으로 간주한다.
  - 테스트 결과 리뷰는 `report/REVIEW.md`의 테스트 섹션이나 `report/TEST_REPORT.md` 에서 확인한다. 
- **금지 행동**:
  - 요구사항 변경
  - 기획 문서 무단 수정
  - 테스트 실패 무시
- **전환**: 구현 및 자체 검토 완료 후 Tester 호출

### 3.3 Tester (검증)
- **임무**: 구현된 코드가 요구사항을 충족하는지 검증하고 실패를 증명한다.
- **필수 산출물**:
  - `report/REVIEW.md`의 테스트 섹션
  - 필요 시 `report/TEST_REPORT.md` 추가 생성 가능
- **필수 행동**:
  - 단위/통합 테스트 실행
  - PASS/FAIL 명확화
  - 재현 절차 기록
  - 경계값/실패 케이스 중심 검증
- **금지 행동**:
  - 코드 직접 수정
  - 설계 변경 강행
  - 추측성 판정
- **전환**:
  - 실패 시 Developer에 구체적 수정 요청과 함께 반려
  - 모든 테스트 통과 시 Reviewer 호출

### 3.4 Reviewer (리뷰 및 최적화)
- **임무**: 최종 품질 게이트를 수행하고 승인/반려를 결정한다.
- **필수 산출물**:
  - `report/REVIEW.md`의 승인 섹션
- **필수 행동**:
  - 코드 컨벤션, 구조, 성능, 보안, 유지보수성 중심 리뷰
  - TDD 적용 적절성 확인
  - 결과를 `APPROVE` 또는 `CHANGES_REQUESTED` 중 하나로만 명시
- **금지 행동**:
  - 코드 직접 수정
  - 새 기능 제안으로 범위 확장
  - 사소한 스타일 지적에만 치우친 리뷰
- **전환**:
  - 승인 시 DONE
  - 반려 시 Developer로 되돌려 수정 루프 진행

---

## 4. 절대 위반 불가 규칙

- 문서 없는 작업은 무효
- 역할 침범은 규칙 위반
- 승인 없는 완료는 불가
- 테스트 실패 상태에서 다음 단계 진입 금지
- 본 문서는 프로젝트 최상위 협업 규칙으로 간주한다

---

## 5. TASK 템플릿 예시

```markdown
## 📑 세부 작업 리스트
- [x] 요구사항 상세 분석 및 PRD 작성
- [ ] 데이터베이스 스키마 설계
- [ ] 핵심 API 유닛 테스트 작성
- [ ] 기능 로직 구현
```
